(("undefined"!==typeof self?self:this)["webpackJsonpelemental_1_0_1"]=("undefined"!==typeof self?self:this)["webpackJsonpelemental_1_0_1"]||[]).push([[2],{a6ba:function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.value?t("CruResource",{attrs:{"done-route":e.doneRoute,"can-yaml":!0,mode:e.mode,resource:e.value,errors:e.errors},on:{error:function(a){return e.errors=a},finish:e.save,cancel:e.done}},[t("div",{staticClass:"row mb-40",class:{"mt-40":!e.hasBeenCreated}},[t("div",{staticClass:"col span-12"},[t("h3",[e._v(e._s(e.t("elemental.machineRegistration.create.configuration")))]),t("NameNsDescription",{attrs:{mode:e.mode,"description-hidden":!0,namespaced:!1},model:{value:e.value,callback:function(a){e.value=a},expression:"value"}})],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("elemental.machineRegistration.create.cloudConfiguration")))]),t("YamlEditor",{ref:"yamleditor",staticClass:"mb-20",attrs:{"editor-mode":e.editorMode},model:{value:e.cloudConfig,callback:function(a){e.cloudConfig=a},expression:"cloudConfig"}}),e.isView?e._e():t("div",{staticClass:"mb-20"},[t("FileSelector",{staticClass:"btn role-secondary",attrs:{label:e.t("elemental.machineRegistration.create.readFromFile")},on:{selected:e.onFileSelected}})],1),e._l(e.yamlErrors,(function(e,a){return t("Banner",{key:a,attrs:{color:"error",label:e}})}))],2)]),t("div",{staticClass:"row mb-40"},[t("div",{staticClass:"col span-12"},[t("h3",{staticClass:"mt-10"},[e._v(" "+e._s(e.t("elemental.machineRegistration.create.labelsAndAnnotations"))+" ")]),t("Tabbed",[t("Tab",{attrs:{"label-key":"elemental.machineRegistration.create.machineInv",name:"machine-inventory",weight:3}},[t("Banner",{staticClass:"mb-40",attrs:{color:"info"},domProps:{innerHTML:e._s(e.t("elemental.machineRegistration.create.labelsAndAnnotationsMachInvBanner",{},!0))}}),t("div",{staticClass:"row mb-30"},[t("KeyValue",{key:"labels",attrs:{value:e.value.machineInventoryLabels,"add-label":e.t("labels.addLabel"),mode:e.mode,title:e.t("labels.labels.title"),"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(a){return e.value.setLabels(a,"machineInventoryLabels",!0)}}})],1),t("div",{staticClass:"row mb-10"},[t("KeyValue",{key:"annotations",attrs:{value:e.value.machineInventoryAnnotations,"add-label":e.t("labels.addAnnotation"),mode:e.mode,title:e.t("labels.annotations.title"),"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(a){return e.value.setAnnotations(a,"machineInventoryAnnotations",!0)}}})],1)],1),t("Tab",{attrs:{"label-key":"elemental.machineRegistration.create.machineReg",name:"machine-reg",weight:2}},[t("Banner",{staticClass:"mb-40",attrs:{color:"info"},domProps:{innerHTML:e._s(e.t("elemental.machineRegistration.create.labelsAndAnnotationsMachRegBanner",{},!0))}}),t("div",{staticClass:"row mb-30"},[t("KeyValue",{key:"labels",attrs:{value:e.value.labels,"add-label":e.t("labels.addLabel"),mode:e.mode,title:e.t("labels.labels.title"),"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(a){return e.value.setLabels(a)}}})],1),t("div",{staticClass:"row mb-10"},[t("KeyValue",{key:"annotations",attrs:{value:e.value.annotations,"add-label":e.t("labels.addAnnotation"),mode:e.mode,title:e.t("labels.annotations.title"),"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(a){return e.value.setAnnotations(a)}}})],1)],1)],1)],1)])]):t("Loading")},s=[],n=t("15ca"),r=t("fd5f"),o=t("305c"),i=t("6418"),c=t("870a"),d=t("8b2c"),u=t("a232"),m=t("3c8c"),b=t("7838"),v=t.n(b),h=t("c5e6"),p=t("da25"),g=t("3e9d"),f=t("0cb2"),C=t("38de"),y={name:"MachineRegistrationEditView",components:{Loading:n["a"],CruResource:r["a"],YamlEditor:c["b"],KeyValue:u["a"],Banner:i["a"],FileSelector:d["a"],NameNsDescription:m["a"],Tabbed:f["a"],Tab:C["a"]},mixins:[o["a"]],props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},data(){return{cloudConfig:"string"===typeof this.value.spec?this.value.spec:Object(h["b"])(this.value.spec),yamlErrors:null}},watch:{cloudConfig:{handler(e){try{const a=v.a.load(e);this.value.spec=a,this.yamlErrors=null}catch(a){this.yamlErrors=Object(g["b"])(a)}},immediate:!0}},computed:{isCreate(){return this.mode===p["j"]},isView(){return this.mode!==p["j"]&&this.mode!==p["l"]},editorMode(){return this.isView?c["a"].VIEW_CODE:c["a"].EDIT_CODE},hasBeenCreated(){return!!this.value.id}},methods:{async save(e){this.errors=[];try{await this.value.save(),e(!0),this.isCreate?this.$router.replace(this.value.detailLocation):this.done()}catch(a){this.errors=Object(g["b"])(a),e(!1)}},onFileSelected(e){const a=this.$refs.yamleditor;a&&a.updateValue(e)}}},_=y,w=t("d802"),R=Object(w["a"])(_,l,s,!1,null,"3ef57ade",null);a["default"]=R.exports},f09e:function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.value?t("CruResource",{attrs:{"done-route":e.doneRoute,"can-yaml":!0,mode:e.mode,resource:e.value,errors:e.errors},on:{error:function(a){return e.errors=a},finish:e.save,cancel:e.done}},[t("div",{staticClass:"row mt-40 mb-20"},[t("div",{staticClass:"col span-12 mb-20"},[t("h3",[e._v(e._s(e.t("elemental.osimage.create.configuration")))]),t("NameNsDescription",{attrs:{mode:e.mode,"description-hidden":!0,namespaced:!1},model:{value:e.value,callback:function(a){e.value=a},expression:"value"}})],1)]),e.value.spec?t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6 mb-20"},[t("h3",[e._v(e._s(e.t("elemental.osimage.create.spec")))]),t("LabeledSelect",{staticClass:"mb-40",attrs:{label:e.t("elemental.osimage.create.targetCluster.label"),placeholder:e.t("elemental.osimage.create.targetCluster.placeholder",null,!0),mode:e.mode,options:e.clusterTargetOptions,multiple:!0},model:{value:e.clusterTargets,callback:function(a){e.clusterTargets=a},expression:"clusterTargets"}}),t("LabeledInput",{attrs:{label:e.t("elemental.osimage.create.osImage.label"),placeholder:e.t("elemental.osimage.create.osImage.placeholder",null,!0),mode:e.mode},model:{value:e.value.spec.osImage,callback:function(a){e.$set(e.value.spec,"osImage","string"===typeof a?a.trim():a)},expression:"value.spec.osImage"}})],1)]):e._e()]):t("Loading")},s=[],n=t("15ca"),r=t("fd5f"),o=t("305c"),i=t("8e93"),c=t("466b"),d=t("3c8c"),u=t("da25"),m=t("907c"),b=t("a655"),v={name:"ManagedOsImagesEditView",components:{Loading:n["a"],LabeledInput:i["a"],LabeledSelect:c["a"],CruResource:r["a"],NameNsDescription:d["a"]},mixins:[o["a"]],props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},async fetch(){const e=await this.$store.dispatch("management/findAll",{type:m["a"].RANCHER_CLUSTER});this.elementalClusters=Object(b["a"])(e)},data(){return{elementalClusters:[],clusterTargets:this.handleClusterTargets()}},computed:{clusterTargetOptions(){return this.elementalClusters.map(e=>({label:e.name,value:e.name}))},isCreate(){return this.mode===u["j"]}},watch:{clusterTargets(e){this.value.spec.clusterTargets=e.map(e=>({clusterName:e}))}},methods:{handleClusterTargets(){var e,a;const t=null===(e=this.value)||void 0===e||null===(a=e.spec)||void 0===a?void 0:a.clusterTargets;if(null!==t&&void 0!==t&&t.length){const e=[];return t.forEach(a=>{e.push(a.clusterName)}),e}return[]}}},h=v,p=t("d802"),g=Object(p["a"])(h,l,s,!1,null,null,null);a["default"]=g.exports}}]);
//# sourceMappingURL=elemental-1.0.1.umd.min.edit.js.map