{"version":3,"sources":["webpack://elemental-1.0.1/./edit/elemental.cattle.io.machineregistration.vue?4117","webpack://elemental-1.0.1/edit/elemental.cattle.io.machineregistration.vue","webpack://elemental-1.0.1/./edit/elemental.cattle.io.machineregistration.vue?9fb7","webpack://elemental-1.0.1/./edit/elemental.cattle.io.machineregistration.vue","webpack://elemental-1.0.1/./edit/elemental.cattle.io.managedosimage.vue?0c11","webpack://elemental-1.0.1/edit/elemental.cattle.io.managedosimage.vue","webpack://elemental-1.0.1/./edit/elemental.cattle.io.managedosimage.vue?2e45","webpack://elemental-1.0.1/./edit/elemental.cattle.io.managedosimage.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","value","attrs","doneRoute","mode","errors","on","e","save","done","staticClass","class","hasBeenCreated","_v","_s","t","model","callback","$$v","expression","ref","editorMode","cloudConfig","isView","_e","onFileSelected","_l","err","i","key","domProps","machineInventoryLabels","$event","setLabels","machineInventoryAnnotations","setAnnotations","labels","annotations","staticRenderFns","name","components","Loading","CruResource","YamlEditor","KeyValue","Banner","FileSelector","NameNsDescription","Tabbed","Tab","mixins","props","type","required","data","yamlErrors","watch","handler","immediate","computed","isCreate","methods","saveCb","component","clusterTargetOptions","clusterTargets","spec","$set","trim","LabeledInput","LabeledSelect","elementalClusters","label","clusterName","handleClusterTargets","targetsArray"],"mappings":"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","file":"elemental-1.0.1.umd.min.edit.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.value)?_c('Loading'):_c('CruResource',{attrs:{\"done-route\":_vm.doneRoute,\"can-yaml\":true,\"mode\":_vm.mode,\"resource\":_vm.value,\"errors\":_vm.errors},on:{\"error\":function (e){ return _vm.errors = e; },\"finish\":_vm.save,\"cancel\":_vm.done}},[_c('div',{staticClass:\"row mb-40\",class:{'mt-40': !_vm.hasBeenCreated }},[_c('div',{staticClass:\"col span-12\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.machineRegistration.create.configuration')))]),_c('NameNsDescription',{attrs:{\"mode\":_vm.mode,\"description-hidden\":true,\"namespaced\":false},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)]),_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.machineRegistration.create.cloudConfiguration')))]),_c('YamlEditor',{ref:\"yamleditor\",staticClass:\"mb-20\",attrs:{\"editor-mode\":_vm.editorMode},model:{value:(_vm.cloudConfig),callback:function ($$v) {_vm.cloudConfig=$$v},expression:\"cloudConfig\"}}),(!_vm.isView)?_c('div',{staticClass:\"mb-20\"},[_c('FileSelector',{staticClass:\"btn role-secondary\",attrs:{\"label\":_vm.t('elemental.machineRegistration.create.readFromFile')},on:{\"selected\":_vm.onFileSelected}})],1):_vm._e(),_vm._l((_vm.yamlErrors),function(err,i){return _c('Banner',{key:i,attrs:{\"color\":\"error\",\"label\":err}})})],2)]),_c('div',{staticClass:\"row mb-40\"},[_c('div',{staticClass:\"col span-12\"},[_c('h3',{staticClass:\"mt-10\"},[_vm._v(\" \"+_vm._s(_vm.t('elemental.machineRegistration.create.labelsAndAnnotations'))+\" \")]),_c('Tabbed',[_c('Tab',{attrs:{\"label-key\":\"elemental.machineRegistration.create.machineInv\",\"name\":\"machine-inventory\",\"weight\":3}},[_c('Banner',{staticClass:\"mb-40\",attrs:{\"color\":\"info\"},domProps:{\"innerHTML\":_vm._s(_vm.t('elemental.machineRegistration.create.labelsAndAnnotationsMachInvBanner', {}, true))}}),_c('div',{staticClass:\"row mb-30\"},[_c('KeyValue',{key:\"labels\",attrs:{\"value\":_vm.value.machineInventoryLabels,\"add-label\":_vm.t('labels.addLabel'),\"mode\":_vm.mode,\"title\":_vm.t('labels.labels.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.value.setLabels($event, 'machineInventoryLabels', true)}}})],1),_c('div',{staticClass:\"row mb-10\"},[_c('KeyValue',{key:\"annotations\",attrs:{\"value\":_vm.value.machineInventoryAnnotations,\"add-label\":_vm.t('labels.addAnnotation'),\"mode\":_vm.mode,\"title\":_vm.t('labels.annotations.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.value.setAnnotations($event, 'machineInventoryAnnotations', true)}}})],1)],1),_c('Tab',{attrs:{\"label-key\":\"elemental.machineRegistration.create.machineReg\",\"name\":\"machine-reg\",\"weight\":2}},[_c('Banner',{staticClass:\"mb-40\",attrs:{\"color\":\"info\"},domProps:{\"innerHTML\":_vm._s(_vm.t('elemental.machineRegistration.create.labelsAndAnnotationsMachRegBanner', {}, true))}}),_c('div',{staticClass:\"row mb-30\"},[_c('KeyValue',{key:\"labels\",attrs:{\"value\":_vm.value.labels,\"add-label\":_vm.t('labels.addLabel'),\"mode\":_vm.mode,\"title\":_vm.t('labels.labels.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.value.setLabels($event)}}})],1),_c('div',{staticClass:\"row mb-10\"},[_c('KeyValue',{key:\"annotations\",attrs:{\"value\":_vm.value.annotations,\"add-label\":_vm.t('labels.addAnnotation'),\"mode\":_vm.mode,\"title\":_vm.t('labels.annotations.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.value.setAnnotations($event)}}})],1)],1)],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading.vue';\nimport CruResource from '@shell/components/CruResource.vue';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { Banner } from '@components/Banner';\nimport YamlEditor, { EDITOR_MODES } from '@shell/components/YamlEditor';\nimport FileSelector from '@shell/components/form/FileSelector';\nimport KeyValue from '@shell/components/form/KeyValue';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\n\nimport jsyaml from 'js-yaml';\nimport { saferDump } from '@shell/utils/create-yaml';\nimport { _CREATE, _EDIT } from '@shell/config/query-params';\nimport { exceptionToErrorsArray } from '@shell/utils/error';\n\nimport Tabbed from '@shell/components/Tabbed/index.vue';\nimport Tab from '@shell/components/Tabbed/Tab.vue';\n\nexport default {\n  name:       'MachineRegistrationEditView',\n  components: {\n    Loading,\n    CruResource,\n    YamlEditor,\n    KeyValue,\n    Banner,\n    FileSelector,\n    NameNsDescription,\n    Tabbed,\n    Tab\n  },\n  mixins:     [CreateEditView],\n  props:      {\n    value: {\n      type:     Object,\n      required: true\n    },\n    mode: {\n      type:     String,\n      required: true\n    },\n  },\n  data() {\n    return {\n      cloudConfig:  typeof this.value.spec === 'string' ? this.value.spec : saferDump(this.value.spec),\n      yamlErrors:   null\n    };\n  },\n  watch: {\n    cloudConfig: {\n      handler(neu) {\n        try {\n          const parsed = jsyaml.load(neu);\n\n          this.value.spec = parsed;\n          this.yamlErrors = null;\n        } catch (e) {\n          this.yamlErrors = exceptionToErrorsArray(e);\n        }\n      },\n      immediate: true\n    }\n  },\n  computed: {\n    isCreate() {\n      return this.mode === _CREATE;\n    },\n    isView() {\n      return this.mode !== _CREATE && this.mode !== _EDIT;\n    },\n    editorMode() {\n      if (!this.isView) {\n        return EDITOR_MODES.EDIT_CODE;\n      }\n\n      return EDITOR_MODES.VIEW_CODE;\n    },\n    hasBeenCreated() {\n      return !!this.value.id;\n    }\n  },\n  methods: {\n    async save(saveCb) {\n      this.errors = [];\n      try {\n        await this.value.save();\n        saveCb(true);\n\n        if (this.isCreate) {\n          this.$router.replace(this.value.detailLocation);\n        } else {\n          this.done();\n        }\n      } catch (err) {\n        this.errors = exceptionToErrorsArray(err);\n        saveCb(false);\n      }\n    },\n    onFileSelected(value) {\n      const component = this.$refs.yamleditor;\n\n      if (component) {\n        component.updateValue(value);\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"!value\" />\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :can-yaml=\"true\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    @error=\"e=>errors = e\"\n    @finish=\"save\"\n    @cancel=\"done\"\n  >\n    <div\n      class=\"row mb-40\"\n      :class=\"{'mt-40': !hasBeenCreated }\"\n    >\n      <div class=\"col span-12\">\n        <h3>{{ t('elemental.machineRegistration.create.configuration') }}</h3>\n        <NameNsDescription\n          v-model=\"value\"\n          :mode=\"mode\"\n          :description-hidden=\"true\"\n          :namespaced=\"false\"\n        />\n      </div>\n    </div>\n    <div class=\"row mb-20\">\n      <div class=\"col span-6\">\n        <h3>{{ t('elemental.machineRegistration.create.cloudConfiguration') }}</h3>\n        <YamlEditor\n          ref=\"yamleditor\"\n          v-model=\"cloudConfig\"\n          class=\"mb-20\"\n          :editor-mode=\"editorMode\"\n        />\n        <div\n          v-if=\"!isView\"\n          class=\"mb-20\"\n        >\n          <FileSelector\n            class=\"btn role-secondary\"\n            :label=\"t('elemental.machineRegistration.create.readFromFile')\"\n            @selected=\"onFileSelected\"\n          />\n        </div>\n        <Banner\n          v-for=\"(err, i) in yamlErrors\"\n          :key=\"i\"\n          color=\"error\"\n          :label=\"err\"\n        />\n      </div>\n    </div>\n    <div class=\"row mb-40\">\n      <div class=\"col span-12\">\n        <h3 class=\"mt-10\">\n          {{ t('elemental.machineRegistration.create.labelsAndAnnotations') }}\n        </h3>\n        <Tabbed>\n          <Tab\n            label-key=\"elemental.machineRegistration.create.machineInv\"\n            name=\"machine-inventory\"\n            :weight=\"3\"\n          >\n            <Banner\n              class=\"mb-40\"\n              color=\"info\"\n              v-html=\"t('elemental.machineRegistration.create.labelsAndAnnotationsMachInvBanner', {}, true)\"\n            />\n            <div class=\"row mb-30\">\n              <KeyValue\n                key=\"labels\"\n                :value=\"value.machineInventoryLabels\"\n                :add-label=\"t('labels.addLabel')\"\n                :mode=\"mode\"\n                :title=\"t('labels.labels.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"value.setLabels($event, 'machineInventoryLabels', true)\"\n              />\n            </div>\n            <div class=\"row mb-10\">\n              <KeyValue\n                key=\"annotations\"\n                :value=\"value.machineInventoryAnnotations\"\n                :add-label=\"t('labels.addAnnotation')\"\n                :mode=\"mode\"\n                :title=\"t('labels.annotations.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"value.setAnnotations($event, 'machineInventoryAnnotations', true)\"\n              />\n            </div>\n          </Tab>\n          <Tab\n            label-key=\"elemental.machineRegistration.create.machineReg\"\n            name=\"machine-reg\"\n            :weight=\"2\"\n          >\n            <Banner\n              class=\"mb-40\"\n              color=\"info\"\n              v-html=\"t('elemental.machineRegistration.create.labelsAndAnnotationsMachRegBanner', {}, true)\"\n            />\n            <div class=\"row mb-30\">\n              <KeyValue\n                key=\"labels\"\n                :value=\"value.labels\"\n                :add-label=\"t('labels.addLabel')\"\n                :mode=\"mode\"\n                :title=\"t('labels.labels.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"value.setLabels($event)\"\n              />\n            </div>\n            <div class=\"row mb-10\">\n              <KeyValue\n                key=\"annotations\"\n                :value=\"value.annotations\"\n                :add-label=\"t('labels.addAnnotation')\"\n                :mode=\"mode\"\n                :title=\"t('labels.annotations.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"value.setAnnotations($event)\"\n              />\n            </div>\n          </Tab>\n        </Tabbed>\n      </div>\n    </div>\n  </CruResource>\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./elemental.cattle.io.machineregistration.vue?vue&type=template&id=3ef57ade&scoped=true&\"\nimport script from \"./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js&\"\nexport * from \"./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3ef57ade\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.value)?_c('Loading'):_c('CruResource',{attrs:{\"done-route\":_vm.doneRoute,\"can-yaml\":true,\"mode\":_vm.mode,\"resource\":_vm.value,\"errors\":_vm.errors},on:{\"error\":function (e){ return _vm.errors = e; },\"finish\":_vm.save,\"cancel\":_vm.done}},[_c('div',{staticClass:\"row mt-40 mb-20\"},[_c('div',{staticClass:\"col span-12 mb-20\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.osimage.create.configuration')))]),_c('NameNsDescription',{attrs:{\"mode\":_vm.mode,\"description-hidden\":true,\"namespaced\":false},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)]),(_vm.value.spec)?_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-6 mb-20\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.osimage.create.spec')))]),_c('LabeledSelect',{staticClass:\"mb-40\",attrs:{\"label\":_vm.t('elemental.osimage.create.targetCluster.label'),\"placeholder\":_vm.t('elemental.osimage.create.targetCluster.placeholder', null, true),\"mode\":_vm.mode,\"options\":_vm.clusterTargetOptions,\"multiple\":true},model:{value:(_vm.clusterTargets),callback:function ($$v) {_vm.clusterTargets=$$v},expression:\"clusterTargets\"}}),_c('LabeledInput',{attrs:{\"label\":_vm.t('elemental.osimage.create.osImage.label'),\"placeholder\":_vm.t('elemental.osimage.create.osImage.placeholder', null, true),\"mode\":_vm.mode},model:{value:(_vm.value.spec.osImage),callback:function ($$v) {_vm.$set(_vm.value.spec, \"osImage\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"value.spec.osImage\"}})],1)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading.vue';\nimport CruResource from '@shell/components/CruResource.vue';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport { _CREATE } from '@shell/config/query-params';\nimport { CAPI } from '@shell/config/types';\nimport { filterForElementalClusters } from '../utils/elemental-utils';\n\nexport default {\n  name:       'ManagedOsImagesEditView',\n  components: {\n    Loading, LabeledInput, LabeledSelect, CruResource, NameNsDescription\n  },\n  mixins:     [CreateEditView],\n  props:      {\n    value: {\n      type:     Object,\n      required: true\n    },\n    mode: {\n      type:     String,\n      required: true\n    },\n  },\n  async fetch() {\n    const rancherClusters = await this.$store.dispatch('management/findAll', { type: CAPI.RANCHER_CLUSTER });\n\n    this.elementalClusters = filterForElementalClusters(rancherClusters);\n  },\n  data() {\n    return { elementalClusters: [], clusterTargets: this.handleClusterTargets() };\n  },\n  computed: {\n    clusterTargetOptions() {\n      return this.elementalClusters.map((cluster) => {\n        return {\n          label: cluster.name,\n          value: cluster.name\n        };\n      });\n    },\n    isCreate() {\n      return this.mode === _CREATE;\n    }\n  },\n  watch: {\n    clusterTargets(neu) {\n      this.value.spec.clusterTargets = neu.map((val) => {\n        return { clusterName: val };\n      });\n    }\n  },\n  methods: {\n    handleClusterTargets() {\n      const clusterTargets = this.value?.spec?.clusterTargets;\n\n      if (clusterTargets?.length) {\n        const targetsArray = [];\n\n        clusterTargets.forEach((ct) => {\n          targetsArray.push(ct.clusterName);\n        });\n\n        return targetsArray;\n      }\n\n      return [];\n    }\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"!value\" />\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :can-yaml=\"true\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    @error=\"e=>errors = e\"\n    @finish=\"save\"\n    @cancel=\"done\"\n  >\n    <div class=\"row mt-40 mb-20\">\n      <div class=\"col span-12 mb-20\">\n        <h3>{{ t('elemental.osimage.create.configuration') }}</h3>\n        <NameNsDescription v-model=\"value\" :mode=\"mode\" :description-hidden=\"true\" :namespaced=\"false\" />\n      </div>\n    </div>\n    <div v-if=\"value.spec\" class=\"row mb-20\">\n      <div class=\"col span-6 mb-20\">\n        <h3>{{ t('elemental.osimage.create.spec') }}</h3>\n        <LabeledSelect\n          v-model=\"clusterTargets\"\n          class=\"mb-40\"\n          :label=\"t('elemental.osimage.create.targetCluster.label')\"\n          :placeholder=\"t('elemental.osimage.create.targetCluster.placeholder', null, true)\"\n          :mode=\"mode\"\n          :options=\"clusterTargetOptions\"\n          :multiple=\"true\"\n        />\n        <LabeledInput\n          v-model.trim=\"value.spec.osImage\"\n          :label=\"t('elemental.osimage.create.osImage.label')\"\n          :placeholder=\"t('elemental.osimage.create.osImage.placeholder', null, true)\"\n          :mode=\"mode\"\n        />\n      </div>\n    </div>\n  </CruResource>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./elemental.cattle.io.managedosimage.vue?vue&type=template&id=1bc3b1b4&\"\nimport script from \"./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js&\"\nexport * from \"./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}